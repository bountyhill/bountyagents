# Bountyagents

The Bountyagents project collects the various agents and standalone workers, that build the
backbone of the Bountyhill application. 

### Managing agent processes.

Agent processes are managed by the rules laid out in the Procfile. To start 
all processes locally (i.e. for development purposes), run

    foreman start
    
### Deployment

Deployment to heroku is done using the `kibo` application.

### Configuration

See bountyhill's configuration guide.

## Bountytwirl

The Bountytwirl application connects to a Twitter feed and selects Twitter status updates
according to Bountyhill specs (i.e. must have an URL, must have a #bountyhill tag)

### Messages generated by Bountytwirl

    1.9.2 ~/projects/bountyhill/bountytwirl[master] > grep -h enqueue *.rb | sed 'sX^ *XX'
    Bountybase::Message::Tweet.enqueue t

- `Bountybase::Message::Tweet` wraps a Tweet

### Metrics generated by Bountytwirl

    1.9.2 ~/projects/bountyhill/bountytwirl[master] > grep -h metric *.rb | sed 'sX^ *XX'
    Bountybase.metrics.startup!
    Bountybase.metrics.heartbeat!
    Bountybase.metrics.twitter_limit! :skip_count => skip_count
    Bountybase.metrics.twitter_enhance_your_calm!
    Bountybase.metrics.twitter_reconnected!
    Bountybase.metrics.tweet! :lang => status.user.lang, :tags => hashtags

- `startup!`: bountytwirl started.
- `heartbeat!`: A heartbeat
- `twitter_limit! :skip_count => skip_count`: Twitter warning: limit reached, skippinh messages
- `twitter_enhance_your_calm!`: Twitter warning: limit reached
- `twitter_reconnected!`: Twitter warning: reconnecting
- `tweet! :lang => status.user.lang, :tags => hashtags`: a message has been seen and enqueued

## Bountyclerk

This package implements 

- the bountyhill resque runner (`foreman start clerk`)
- the bountyhill resque control server (`foreman start clerkweb`)

This implementation was inspired by https://github.com/phoet/freemium. Check its README.md for more details.

### Metrics generated by bountyclerk

The bountyclerk application does not generate messages. It does, however, generate a heartbeat event,
which it logs itself.

## Bountystats

The bountystats agents implement 

- a fnordmetric worker (`foreman start stats`)
- a fnordmetric web interface (`foreman start statsweb`)
